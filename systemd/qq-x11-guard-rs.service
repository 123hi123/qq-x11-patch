[Unit]
Description=QQ X11 Connection Guard (Rust)
After=graphical-session.target
Wants=graphical-session.target

[Service]
Type=simple
Environment=DISPLAY=:0
Environment=XAUTHORITY=%h/.Xauthority
ExecStart=%h/.local/bin/qq-x11-guard-rs --app-name qq --threshold 20 --restart-cmd /opt/QQ/qq --cooldown 120 --fallback-poll 15 --scan-interval 2
Restart=always
RestartSec=3

[Install]
WantedBy=default.target
